{"version":3,"sources":["../src/index.js"],"names":["loaderRegExp","noChunkRegExp","module","exports","localeLoader","content","callback","async","test","readdir","context","f","files","filter","chunk"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,eAAe,yBAArB;AACA,IAAMC,gBAAgB,mCAAtB;;AAEAC,OAAOC,OAAP,GAAiB,SAASC,YAAT,CAAsBC,OAAtB,EAA+B;AAAA;;AAC9C,MAAMC,WAAW,KAAKC,KAAL,EAAjB;AACA,MAAIP,aAAaQ,IAAb,CAAkBH,OAAlB,CAAJ,EAAgC;AAC9B,+DAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACsB,oBAAGI,OAAH,CAAW,MAAKC,OAAhB,CADtB;;AAAA;AAAA,4BACuD;AAAA,uBAAK,4BAAaC,CAAb,CAAL;AAAA,eADvD;;AACOC,mBADP,iBACgDC,MADhD;;AAECP,uBAAS,IAAT,EAAe,8BAAe;AAC5BM,4BAD4B;AAE5BE,uBAAO,CAACb,cAAcO,IAAd,CAAmBH,OAAnB;AAFoB,eAAf,CAAf;;AAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;AAOD,GARD,MAQO;AACLC,aAAS,IAAT,EAAeD,OAAf;AACD;AACF,CAbD","file":"index.js","sourcesContent":["import fs from 'fs-promise';\nimport generateLoader from './generateLoader';\nimport isLocaleFile from './isLocaleFile';\n\nconst loaderRegExp = /\\/\\* ?loadLocale.*?\\*\\//;\nconst noChunkRegExp = /\\/\\* ?loadLocale.*?noChunk.*?\\*\\//;\n\nmodule.exports = function localeLoader(content) {\n  const callback = this.async();\n  if (loaderRegExp.test(content)) {\n    (async () => {\n      const files = (await fs.readdir(this.context)).filter(f => isLocaleFile(f));\n      callback(null, generateLoader({\n        files,\n        chunk: !noChunkRegExp.test(content),\n      }));\n    })();\n  } else {\n    callback(null, content);\n  }\n};\n"]}