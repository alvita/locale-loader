{"version":3,"sources":["transformLocaleLoader.js"],"names":["transformLocaleLoader","noChunk","obj","file","enc","done","content","contents","toString","test","folderPath","dirname","path","readdir","files","filter","loader","Buffer","push","transform"],"mappings":";;;;;;;;;;;;;;kBAQwBA,qB;;AARxB;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEe,SAASA,qBAAT,GAEP;AAAA,iFAAJ,EAAI;AAAA,0BADNC,OACM;AAAA,MADNA,OACM,gCADI,KACJ;;AACN,SAAO,kBAAQC,GAAR;AAAA,2EAAY,iBAAyBC,IAAzB,EAA+BC,GAA/B,EAAoCC,IAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AACXC,qBADW,GACDH,KAAKI,QAAL,CAAcC,QAAd,CAAuBJ,GAAvB,CADC;;AAAA,mBAEb,uBAAaK,IAAb,CAAkBH,OAAlB,CAFa;AAAA;AAAA;AAAA;;AAGTI,wBAHS,GAGI,eAAKC,OAAL,CAAaR,KAAKS,IAAlB,CAHJ;AAAA;AAAA,qBAIM,oBAAGC,OAAH,CAAWH,UAAX,CAJN;;AAAA;AAAA;AAITI,mBAJS,iBAI8BC,MAJ9B;AAKTC,oBALS,GAKA,8BAAe;AAC5BF,4BAD4B;AAE5Bb,yBAASA,WAAW,wBAAcQ,IAAd,CAAmBH,OAAnB;AAFQ,eAAf,CALA;;AASfH,mBAAKI,QAAL,GAAgB,IAAIU,MAAJ,CAAWD,MAAX,EAAmB,MAAnB,CAAhB;;AATe;AAWjB,mBAAKE,IAAL,CAAUf,IAAV;AACAE;;AAZiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAZ;;AAAA,aAA2Bc,SAA3B;AAAA;AAAA;;AAAA,WAA2BA,SAA3B;AAAA,MAAP;AAcD","file":"transformLocaleLoader.js","sourcesContent":["import through from 'through2';\nimport fs from 'fs-promise';\nimport path from 'path';\nimport isLocaleFile from './isLocaleFile';\nimport generateLoader from './generateLoader';\nimport loaderRegExp from './loaderRegExp';\nimport noChunkRegExp from './noChunkRegExp';\n\nexport default function transformLocaleLoader({\n  noChunk = false,\n} = {}) {\n  return through.obj(async function transform(file, enc, done) {\n    const content = file.contents.toString(enc);\n    if (loaderRegExp.test(content)) {\n      const folderPath = path.dirname(file.path);\n      const files = (await fs.readdir(folderPath)).filter(isLocaleFile);\n      const loader = generateLoader({\n        files,\n        noChunk: noChunk || noChunkRegExp.test(content),\n      });\n      file.contents = new Buffer(loader, 'utf8');\n    }\n    this.push(file);\n    done();\n  });\n}\n"]}